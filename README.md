# 프로젝트명- 팀명

## 🤗👨‍💻👩‍💻  팀원 소개

<table>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/8aef79a6-76b5-496a-ada1-40fc96373a83" width="100"  height="100"><br>
      <b><a href="https://github.com/kimdoyun0806">김도윤</a></b><br>팀원
    </td>
     <td align="center">
      <img src="https://github.com/user-attachments/assets/8aef79a6-76b5-496a-ada1-40fc96373a83" width="100"  height="100"><br>
      <b><a href="">김민석</a></b><br>팀원
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/8aef79a6-76b5-496a-ada1-40fc96373a83" width="100" height="100"><br>
      <b>🏆 <a href="https://github.com/namoo36">이승용</a></b><br><b>팀장</b>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/8aef79a6-76b5-496a-ada1-40fc96373a83" width="100"  height="100"><br>
      <b><a href="https://github.com/jelee55">이제경</a></b><br>팀원
    </td>
  </tr>
</table>

<br>

## 기술 스택
### 🌐 Backend
<img src="https://img.shields.io/badge/java-007396?style=for-the-badge&logo=java&logoColor=white"> <img src="https://img.shields.io/badge/spring-6DB33F?style=for-the-badge&logo=spring&logoColor=white">
<img src="https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white">
<img src="https://img.shields.io/badge/Spring Security-6DB33F?style=for-the-badge&logo=Spring Security&logoColor=white"> ![JWT](https://img.shields.io/badge/JWT-000000?style=for-the-badge&logo=jsonwebtokens&logoColor=white) ![QueryDSL](https://img.shields.io/badge/QueryDSL-005571?style=for-the-badge&logo=hibernate&logoColor=white)

### 🌐 Frontend
<img src="https://img.shields.io/badge/css3-1572B6?style=for-the-badge&logo=css3&logoColor=white"> <img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white"> <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=JavaScript&logoColor=white"> <img src="https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=Axios&logoColor=white"> <img src="https://img.shields.io/badge/vue.js-4FC08D?style=for-the-badge&logo=Vue.js&logoColor=white"> <img src="https://img.shields.io/badge/bootstrap-7952B3?style=for-the-badge&logo=bootstrap&logoColor=white">

### 🗃️ DB
<img src="https://img.shields.io/badge/mariaDB-003545?style=for-the-badge&logo=mariaDB&logoColor=white"> <img src="https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=Redis&logoColor=white"> 

### ⚙️ Tools
<img src="https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=Git&logoColor=white"> <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white"> <img src="https://img.shields.io/badge/Figma-9C29B1?style=for-the-badge&logo=Figma&logoColor=white"> <img src="https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=Postman&logoColor=white"> <img src="https://img.shields.io/badge/Swagger-85EA2D?style=for-the-badge&logo=Swagger&logoColor=white"> <img src="https://img.shields.io/badge/erdCloud-0097A7?style=for-the-badge&logo=erdCloud&logoColor=white">

### 🚀 CI/CD
<img src="https://img.shields.io/badge/AWS EC2-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white"> <img src="https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=Docker&logoColor=white"> <img src="https://img.shields.io/badge/DockerHub-2496ED?style=for-the-badge&logo=docker&logoColor=white"> <img src="https://img.shields.io/badge/Kubernetes-326CE5?style=for-the-badge&logo=Kubernetes&logoColor=white"> <img src="https://img.shields.io/badge/ArgoCD-F5503C?style=for-the-badge&logo=argo&logoColor=white">

### 💬 Communication
<img src="https://img.shields.io/badge/Jira-0052CC?style=for-the-badge&logo=Jira&logoColor=white"> <img src="https://img.shields.io/badge/Discord-7289DA?style=for-the-badge&logo=Discord&logoColor=white"> <img src="https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=Notion&logoColor=white">

<br>

## 📌 목차

1. [프로젝트 소개](#-프로젝트-소개)
2. [WBS](#-wbs)
2. [요구사항 명세서](#-요구사항-명세서)
4. [시스템 아키텍처](#-시스템-아키텍처)
5. [ERD 설계](#-erd-설계)
6. [CI/CD 파이프라인](#️-cicd-파이프라인)
7. [CI/CD 테스트 결과](#-cicd-테스트-결과)

<br><br>

## 🌟 프로젝트 소개

![시장 그래프](https://github.com/user-attachments/assets/3d3cfb19-c0a3-4717-9ff6-d6a607407a03)  
> **2023년 기준**, 국내에서 판매된 건강기능식품의 매출은 **3조 7,677억 원**에 달하며,  
> 건강기능식품을 섭취하는 사람들의 수요는 계속해서 **증가**하고 있습니다.

그러나 건강기능식품을 선택할 때,  
개인의 **건강 상태**와 **생활 습관**에 맞는 제품을 선택하는 것이 매우 중요합니다.  
특히 **알레르기**나 **약물과의 상호작용**을 고려해야 하므로,  
**전문가의 상담을 통해 최적의 제품을 선택**하는 것이 필수적입니다.

---

### 🧬 영양갱이란?

**개인 맞춤형 건강기능식품**을 제공하고  
사용자가 보다 **안전하고 신뢰할 수 있는 제품**을 선택할 수 있도록 돕는 헬스케어 서비스입니다.  

또한 건강기능식품의 **적절한 섭취를 유도**하고,  
사용자의 **건강을 최적화**하는 데 중요한 역할을 합니다.

---

## 🧠 개인 맞춤형 건강기능식품 추천 서비스

### ✔️ 서비스 개요
사용자의 **건강 상태**와 **생활 습관**을 분석하여  
가장 적합한 영양제를 **맞춤 추천**하는 서비스입니다.

### ✔️ 서비스 장점
- 사용자는 **필요한 정보**를 충분히 제공받고  
- **알레르기** 또는 **약물 상호작용**으로 인한 **부작용을 예방**할 수 있습니다.
- **불필요한 소비를 줄이고**, 꼭 필요한 제품만 **선택적으로 구매**할 수 있도록 돕습니다.

---

> 🔎 “건강을 챙긴다는 것, 이제는 **데이터 기반의 맞춤형 선택**으로 시작됩니다.”

<br>

## 🛠️ 주요 기능

### ✔️ 개인 맞춤형 건강기능식품 추천
- 건강 문진 데이터를 기반으로 한 **추천 알고리즘**
- 섭취량, 주의사항 안내 및 **부작용 예방 정보 제공**

### ✔️ 약사 1:1 상담
- 전문 약사와의 **실시간 상담**
- 약물 상호작용, 중복 섭취 등 **건강 리스크 사전 예방**

### ✔️ 건강 정보 공유 커뮤니티
- **자유 게시판**을 통한 사용자 경험 공유
- 최신 건강 이슈 및 **영양제 트렌드 제공**

<br>

## 🌱 프로젝트 기대 효과

### 🎯 최적의 건강관리 지원
- 개인 맞춤형 영양제를 통해 **불필요한 구매 최소화**
- 사용자의 건강 상태에 딱 맞는 **영양제 조합 제안**

### 🛡️ 안전한 섭취 유도
- **중복 섭취, 부작용 등 사전 예방 시스템**
- 전문가 상담을 통한 **신뢰도 높은 건강관리**

### 🛒 소비자 편의성과 신뢰도 향상
- 영양제의 **성분, 효과, 섭취법 등 비교 정보 제공**
- **추천 기반 구매**로 효율적인 소비 가능

### 💬 커뮤니티 활성화
- 건강 관심사를 공유하고 **서로의 경험을 학습**
- **건강한 삶을 위한 소통 공간 마련**

### 📈 데이터 기반 최적화
- 사용자 피드백 및 건강 데이터를 바탕으로  
  **지속적인 알고리즘 개선 및 서비스 정밀화**

<br><br>

## 📚 WBS

<details>
<summary>📄 WBS 문서 보기</summary>

🔗 [WBS 링크](https://docs.google.com/spreadsheets/d/15YYf8uofEw9gY0yJmCZ47F-nCaSvJ7-zgntefZcZcI8/edit?usp=sharing)
</details>

![WBS 이미지](https://github.com/user-attachments/assets/404be2bf-9a79-4989-ae36-80f1d01a2186)

<br><br>

## 📝 요구사항 명세서

<details>
<summary>📄 요구사항 명세서 보기</summary>

🔗 [요구사항 명세서 링크](https://docs.google.com/spreadsheets/d/1TTMjfj1YzECr6DAoFVO8egKHkfiWsfq1BlWVQVYVd1M/edit?usp=sharing)
</details>

<img src="https://github.com/user-attachments/assets/31b2672e-1fe1-4dda-acce-aa0aa280dab2" width="70%">

<br><br>

## 🗂️ ERD 설계

<details>
<summary>📄 ERD 보기</summary>

🔗 [ERD 링크](https://www.erdcloud.com/d/k45NzTHZqR2g769kv)
</details>

![ERD 이미지](https://github.com/user-attachments/assets/cef667aa-ef02-4ba9-82b4-76dd227a586e)

<br><br>

## 🧱 시스템 아키텍처

> 프론트엔드부터 백엔드, 데이터베이스, 배포 구조까지  
> **서비스의 전체적인 흐름을 시각화**하여 구성했습니다.

![시스템 아키텍처](https://github.com/user-attachments/assets/322164d5-6cee-4c14-81d7-f1185e025d35)



<br><br>

## 🛠️ CI/CD 파이프라인

> **개발부터 배포까지**, 자동화된 파이프라인을 통해  
> **일관된 품질과 빠른 배포**를 실현했습니다.

<details><summary>backend pipeline

</summary>

``` 
backend jenkins파일
```
</details>

<details><summary>frtontend pipeline

</summary>

``` 
frontend jenkins파일
```
</details>


### ✔️ 도구 구성 

- **Jenkins, ArgoCD**를 사용한 자동화된 CI/CD
- **Docker** 기반 컨테이너 이미지 빌드
- **Nginx + Spring Boot**를 통한 웹 서버 구성


### ✔️ 흐름 설명

<details><summary>CI/CD 흐름 설명

</summary>

1. Application 변경 사항(프로젝트 코드) Github에 코드 push

      - Vue.js(프론트엔드), Spring Boot(백엔드) 프로젝트에서 수정된 소스 코드를 GitHub의 메인 저장소로 푸시
<br><br>
2. Jenkins가 Webhook을 통해 이벤트를 감지

      - [Backend] : Backend pileline이 동작하게 되고, Gradle 빌드하여 jar파일 생성 :
 
   - [Frontend] : Frondend pipeline이 동작하게 되고, npm 빌드하여 dist폴더 생성
<br><br>
3. 빌드된 결과물은 Dockerfile을 사용하여 Docker image로 생성
<br><br>
4. Docker image 생성 후 외부 저장소(Docker Hub)로 push하여 저장
<br><br>
5. Jenkins가 별도의 Git 저장소에 배포용 YAML 파일 업데이트(ex.deployment.yaml, service.yaml…) & 이미지를 최신으로 업데이트
<br><br>
6. ArgoCd는 Git 저장소의 변경을 감지 및 자동 동기화
    
    - 지정된 Git 저장소의 변경을 감지하면 자동으로 Kubernetes 클러스터에 해당 리소스를 동기화 
<br><br>
7. Kubernetes 클러스터에 최신 컨테이너 자동 배포
    - ArgoCD는 최신 이미지를 사용하여 새로운 Pod를 생성하고, 이전 Pod를 점진적으로 종료하는 롤링 업데이트 방식으로 무중단 배포를 수행

</details>
<br><br>

## 🧪 CI/CD 테스트 결과

> 지속적인 통합과 배포 테스트를 통해  
> **신뢰성 있는 서비스 운영**을 실현했습니다.

> > 아래는 **CI/CD 테스트 예시 결과**입니다.  


### ✔️ 테스트 항목 *(예시)*

- 코드 빌드 성공 여부  
- 유닛 테스트 통과 여부  
- 통합 테스트 (API 기능 검증)  
- Docker 이미지 정상 작동 확인  
- 실제 배포 환경에서의 **헬스 체크 통과 여부**

### ✔️ 주요 성과 *(예시)*

- **빌드 실패율 0%** 유지  
- 주요 기능 배포 시, 평균 **2분 이내 배포 완료**  
- 에러 발생 시 자동 알림 및 **롤백 시스템 도입**





## 오토스케일링

> Kubernetes에서는 리소스 상황에 따라 **자동으로 리소스를 확장하거나 축소**할 수 있는 다양한 오토스케일링 기능을 제공합니다.

### ✅ 주요 오토스케일링 구성 요소

#### 🔹 HPA (Horizontal Pod Autoscaler)  

#### 🔹 Karpenter  
노드 수준의 오토스케일링을 담당하며, Pod가 스케줄되지 못하고 Pending 상태일 때 **자동으로 새로운 Worker Node를 생성**합니다.

![karpenter](https://github.com/user-attachments/assets/ef9bb4fd-2d13-46c3-b0bf-198991b001bd)

##### ⚙️ 작동 흐름

1. **HPA가 Pod를 자동 확장** 또는 재배포합니다.
2. **Kube-scheduler**가 기존 Node에 Pod를 스케줄링하려 시도합니다.
3. 기존 Node에 자원이 부족해 Pod는 **Pending 상태**가 됩니다.
4. **Karpenter가 Pending 상태의 Pod를 감지**하고, 새로운 Worker Node를 **자동 생성**합니다.
5. **Kube-scheduler가 새 Node에 Pod를 스케줄링**합니다.

##### ✅ 장점

- 노드 프로비저닝과 Pod 스케줄링을 자동으로 처리
- 스케일링 속도가 빠름
- Pod 요구사항에 최적화된 노드 생성
- 불필요한 노드 종료로 **비용 절감 효과**
  

## 무중단 배포  
### 블루/그린 배포 (Blue-Green Deployment)

> 두 개의 동일한 환경(**블루**, **그린**)을 준비하여  
한쪽 환경에서 서비스를 운영하는 동안 다른 환경에 새 버전을 배포합니다.  
보통 **blue가 현재 운영 중**, **green이 새 버전**을 의미합니다.<br>
![65c3a844357606c1b08a21f0_Screen-Shot-2021-03-19-at-2 34 46-PM](https://github.com/user-attachments/assets/0ef46c75-a9de-418a-abdf-770a1e03285b)

---

### ⚙️ 배포 흐름

1. **그린 환경 구성**  
   - 현재 운영 중인 블루 환경과 동일한 사양으로 그린 환경을 준비합니다.
2. **새로운 버전 배포**  
   - 그린 환경에 새로운 버전의 애플리케이션을 배포합니다.
3. **테스트 및 검증**  
   - 그린 환경에서 애플리케이션을 테스트하고 검증합니다.
4. **트래픽 전환**  
   - 테스트 완료되면 로드 밸런서를 통해 트래픽을 블루에서 그린으로 전환합니다.
5. **모니터링**  
   - 그린 환경에서 애플리케이션이 정상적으로 **운영되는지 모니터링**합니다.

---

### ✅ 장점

- **실제 운영 환경 테스트**: 새로운 버전을 운영 환경과 동일한 환경에서 사전 테스트 가능합니다.  
- **빠른 롤백**: 문제가 생기면 트래픽을 간단히 **블루로 되돌려** 빠르게 복구 가능합니다.

---

### ⚠️ 단점

- **비용**: 블루와 그린 환경을 **동시에 유지**해야 하므로 자원이 2배 필요합니다.

---

### 🔁 그린 → 블루 롤백 명령어

```bash
kubectl argo rollouts undo rollout rollout-bluegreen -n bluegreen-test
```

